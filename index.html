<!DOCTYPE html>
<html>
<head>
<style>

  html, body {
  margin: 0;
  padding: 0;
}
canvas {
  filter: grayscale(1);
    -webkit-filter: grayscale(1);
    filter: grayscale(100%);
    image-rendering: pixelated;
  display: block;
}
  
  video{
 width: 500;
  height: 500;
  transform: scaleX(-1);
	  margin: auto;
  }


</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.sound.min.js"></script>
  <meta charset="utf-8" />

</head>
<body>

</body>


<script>

  
  let camera;

let videoScale = 15;

function setup() {
  pixelDensity(1);
  createCanvas(480, 480);
  camera = createCapture(VIDEO);
  camera.size(width / videoScale, height / videoScale);
	
  // camera.hide();
}

function draw() {
  background(255);
// 	translate(camera.width/videoScale, 0);
//    scale(-1, 1);
 
	
  camera.loadPixels();
	
//   translate(camera.width,0);
//   scale(-1, 1);
//   image(camera, 0, 0, 640, 480);
	
  loadPixels();
	  if (camera.loadedmetadata) {
    let c = camera.get(1, 0, 480, 480);
    image(c, 0, 0);
	  }
  for (let y = 0; y < camera.height; y++) {
    for (let x = 0; x < camera.width; x++) {
      let index = (x + y * camera.width) * 4;
      let r = camera.pixels[index + 0];
      let g = camera.pixels[index + 1];
      let b = camera.pixels[index + 2];

      // pixels[index+0] = b;
      // pixels[index+1] = r; 
      // pixels[index+2] = g;
      // pixels[index+3] = 255;
      
      noStroke();
			fill(r, g, b);
      rect(x * videoScale, y * videoScale, videoScale, videoScale);

    
  }
  }
  // updatePixels();

  // displays camera
  // image(camera, 0,0, 320, 240);

}

</script>

</html>
